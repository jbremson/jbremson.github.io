<script type="text/javascript">
        var gk_isXlsx = false;
        var gk_xlsxFileLookup = {};
        var gk_fileData = {};
        function filledCell(cell) {
          return cell !== '' && cell != null;
        }
        function loadFileData(filename) {
        if (gk_isXlsx && gk_xlsxFileLookup[filename]) {
            try {
                var workbook = XLSX.read(gk_fileData[filename], { type: 'base64' });
                var firstSheetName = workbook.SheetNames[0];
                var worksheet = workbook.Sheets[firstSheetName];

                // Convert sheet to JSON to filter blank rows
                var jsonData = XLSX.utils.sheet_to_json(worksheet, { header: 1, blankrows: false, defval: '' });
                // Filter out blank rows (rows where all cells are empty, null, or undefined)
                var filteredData = jsonData.filter(row => row.some(filledCell));

                // Heuristic to find the header row by ignoring rows with fewer filled cells than the next row
                var headerRowIndex = filteredData.findIndex((row, index) =>
                  row.filter(filledCell).length >= filteredData[index + 1]?.filter(filledCell).length
                );
                // Fallback
                if (headerRowIndex === -1 || headerRowIndex > 25) {
                  headerRowIndex = 0;
                }

                // Convert filtered JSON back to CSV
                var csv = XLSX.utils.aoa_to_sheet(filteredData.slice(headerRowIndex)); // Create a new sheet from filtered array of arrays
                csv = XLSX.utils.sheet_to_csv(csv, { header: 1 });
                return csv;
            } catch (e) {
                console.error(e);
                return "";
            }
        }
        return gk_fileData[filename] || "";
        }
        </script><!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Autopia Simulation Game</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 font-sans">
  <header class="bg-blue-600 text-white py-6">
    <div class="container mx-auto px-4">
      <h1 class="text-4xl font-bold">Autopia Simulation Game</h1>
      <p class="mt-2 text-lg">Exploring Market Dynamics of Alternative Fuel and Vehicle Transitions</p>

    </div>
  </header>

  <main class="container mx-auto px-4 py-8">
    <section class="bg-white shadow-md rounded-lg p-6 mb-8">
      <h2 class="text-2xl font-semibold mb-4">About Autopia</h2>
      <p class="text-gray-700">
        <img src="./img/autopia/RD_dials.png">
        Autopia is a serious game developed by Joel Bremson at the University of California, Davis, designed to simulate the complex market dynamics of transitioning to alternative fuel vehicles. By modeling interactions between consumers, vehicle producers, and fuel producers, Autopia provides insights into economic and technological factors influencing the adoption of alternative fuels.
      </p>
    </section>

    <section class="bg-white shadow-md rounded-lg p-6 mb-8">
      <h2 class="text-2xl font-semibold mb-4">Key Findings</h2>
      <ul class="list-disc pl-6 text-gray-700">
        <li><strong>Market Bifurcation:</strong> High fuel prices result in a split market, with small, affordable gasoline vehicles dominating lower-income segments and well-equipped electric vehicles prevalent among the top 30% income bracket.</li>
        <li><strong>Challenges for Alternative Fuels:</strong> Selling alternative fuel vehicles comparable to conventional ones is difficult due to price differences, posing a significant market barrier.</li>
        <li><strong>Gasoline Demand Reduction:</strong> Improved average fuel economy leads to a decrease in gasoline demand, prompting fuel producers to adapt production strategies.</li>
      </ul>
    </section>

    <section class="bg-white shadow-md rounded-lg p-6 mb-8">
      <h2 class="text-2xl font-semibold mb-4">Key Charts from the Dissertation</h2>
    <div class="gallery" id="gallery"></div>
    <div class="modal" id="modal">
        <span class="modal-close" onclick="closeModal()">&times;</span>
        <img id="modal-image" src="">
    </div>

    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            text-align: center;
        }
        table {
            margin: 0 auto;
            border-collapse: collapse;
        }
        td {
            padding: 10px;
            border: 1px solid #ccc;
        }
        .thumbnail {
            width: 200px;
            height: 200px;
            object-fit: cover;
            cursor: pointer;
            border-radius: 5px;
        }
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.8);
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }
        .modal img {
            max-width: 90%;
            max-height: 90%;
            border: 2px solid #fff;
            border-radius: 5px;
        }
        .modal-close {
            position: absolute;
            top: 20px;
            right: 20px;
            color: #fff;
            font-size: 30px;
            cursor: pointer;
        }
    </style>

    <table id="gallery-table"></table>
    <div class="modal" id="modal">
        <span class="modal-close" onclick="closeModal()">×</span>
        <img id="modal-image" src="">
    </div>

    <script>
        // List of image filenames (assumes thumbnails and originals have same names)
        const imageFiles = [
                'RD_dials.png',
                'auction.png',
                'change_price.png',
                'conference.png',
                'drivetrains_by_turn.png',
                'family.png',
                'fleet_data.png',
                'fuel_data.png',
                'gsm_drivetrain_results.png',
                'margins.png',
                'refineries.png',
                'steps_game_vehicle_purchases.png',
                'vehicle_sales.png'
        ];

        const table = document.getElementById('gallery-table');
        const modal = document.getElementById('modal');
        const modalImage = document.getElementById('modal-image');
        const columnsPerRow = 3; // Number of thumbnails per row

        // Create table rows and cells
        function createTable() {
            let row;
            imageFiles.forEach((filename, index) => {
                // Start a new row for every 'columnsPerRow' images
                if (index % columnsPerRow === 0) {
                    row = document.createElement('tr');
                    table.appendChild(row);
                }
                // Create table cell with thumbnail
                const cell = document.createElement('td');
                const thumb = document.createElement('img');
                thumb.src = `img/thumbnails/thumb_${filename}`;
                thumb.className = 'thumbnail';
                thumb.alt = filename;
                thumb.onclick = () => showModal(`img/autopia/${filename}`);
                cell.appendChild(thumb);
                row.appendChild(cell);
            });
        }

        // Show modal with larger image
        function showModal(imageSrc) {
            modalImage.src = imageSrc;
            modal.style.display = 'flex';
        }

        // Close modal
        function closeModal() {
            modal.style.display = 'none';
            modalImage.src = '';
        }

        // Close modal when clicking outside the image
        modal.onclick = function(event) {
            if (event.target === modal) {
                closeModal();
            }
        };

        // Initialize table
        createTable();
    </script>


    </section>



    <section class="bg-white shadow-md rounded-lg p-6 mb-8">
      <h2 class="text-2xl font-semibold mb-4">Dissertation</h2>
      <p class="text-gray-700 mb-4">
        For a detailed exploration of the Autopia project, including its methodology and findings, refer to Joel Bremson’s dissertation.
      </p>
      <a href="https://escholarship.org/content/qt91v2j57d/qt91v2j57d_noSplash_4b5265f918e3efa28d97e3bc6a742d8f.pdf" target="_blank" class="inline-block bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 transition">
        Read the Dissertation
      </a>
    </section>

    <section class="bg-white shadow-md rounded-lg p-6">
      <h2 class="text-2xl font-semibold mb-4">Source Code</h2>
      <p class="text-gray-700 mb-4">
        The source code for the Autopia simulation game is available on GitHub. Explore the repository for more details on the implementation.
      </p>
      <a href="https://github.com/jbremson/Autopia" target="_blank" class="inline-block bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 transition">
        View GitHub Repository
      </a>
    </section>

        <section class="bg-white shadow-md rounded-lg p-6">
      <h2 class="text-2xl font-semibold mb-4">Contact</h2>
          <a href="mailto:joel@autopiaproject.org?subject=Autopia%20Simulation%20Project" class="text-blue-600 hover:underline">joel@autopiaproject.org
      </a>
    </section>
  </main>

  <footer class="bg-gray-800 text-white py-4">
    <div class="container mx-auto px-4 text-center">
      <p>© 2025 Autopia Simulation Project. Developed by Joel Bremson at UC Davis.</p>
    </div>
  </footer>
</body>
</html>